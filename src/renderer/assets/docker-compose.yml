version: '3'
services:
  php-fpm-74:
    build: ./php/7.4
    volumes:
      - ~/mnmp/site:/usr/share/nginx/html
    networks:
      - mnmp
  php-fpm-73:
    build: ./php/7.3
    volumes:
      - ~/mnmp/site:/usr/share/nginx/html
    networks:
      - mnmp
  nginx:
    image: nginx:stable-alpine
    ports:
      - "80:80"
    volumes:
      - ~/mnmp/nginx/vhost:/etc/nginx/conf.d
      - ~/mnmp/nginx/php-fpm:/etc/nginx/php-fpm
      - ~/mnmp/nginx/rewrite:/etc/nginx/rewrite
      - ~/mnmp/site:/usr/share/nginx/html
    networks:
      - mnmp
networks:
  mnmp:
    driver: bridge